@model IEnumerable<RolixSAEProject.Models.Produit>
@using Microsoft.AspNetCore.Mvc.Localization
@inject IViewLocalizer V

@section Styles {
    <link rel="stylesheet" href="~/css/products.css" asp-append-version="true" />
}

@{
    ViewData["Title"] = V["Home_PageTitle"];
    var currency = (ViewData["Currency"] as string) ?? "EUR";
    var symbol = (ViewData["CurrencySymbol"] as string) ?? "â‚¬";
}

<div class="page-hero">
    <div class="section-divider"></div>
    <h1 class="hero-title">ROLIX</h1>
    <p class="hero-subtitle">
        @V["Home_HeroSubtitle"]
    </p>
</div>

<section class="section-shell home-products">
    <h2 class="section-title">@V["Home_WatchSelectionTitle"]</h2>

    @if (Model != null && Model.Any())
    {
        <div class="products-grid">
            @foreach (var p in Model)
            {
                var imageUrl = string.IsNullOrWhiteSpace(p.ImageUrl)
                ? Url.Content("~/images/placeholder-watch.svg")
                : p.ImageUrl;

                <article class="product-card">
                    <div class="product-media">
                        <a asp-controller="Produits" asp-action="Details" asp-route-id="@p.Id">
                            <img src="@imageUrl" alt="@p.Nom" />
                        </a>
                    </div>

                    <div class="product-body">
                        <h3 class="product-name">@p.Nom</h3>

                        @if (!string.IsNullOrWhiteSpace(p.Reference))
                        {
                            <div class="product-ref">REF-@p.Reference</div>
                        }

                        <div class="product-price">
                            @p.GetPrice(currency).ToString("N0") @symbol
                        </div>

                        <div class="product-actions">
                            <a class="button button-outline"
                               asp-controller="Produits"
                               asp-action="Details"
                               asp-route-id="@p.Id">
                                @V["Home_ViewDetails"]
                            </a>
                        </div>
                    </div>
                </article>
            }
        </div>
    }
    
        <div class="empty-state">
            <p>@V["Home_NoWatches"]</p>
        </div>
    

    <div class="cta-row">
        <a class="button" asp-controller="Produits" asp-action="Index">
            @V["Home_DiscoverWatches"]
        </a>
    </div>
</section>

<section class="craft-section">
    <div class="craft-shell">
        <div class="section-divider"></div>
        <h2 class="section-title">@V["Home_CraftTitle"]</h2>
        <p class="craft-description">
            @V["Home_CraftDescription"]
        </p>
    </div>
</section>
