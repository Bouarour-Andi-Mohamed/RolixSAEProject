@model IEnumerable<RolixSAEProject.Models.Produit>

@section Styles {
    <link rel="stylesheet" href="~/css/products.css" asp-append-version="true" />
}

@{
    ViewData["Title"] = "Accueil";
    var currency = (ViewData["Currency"] as string) ?? "EUR";
    var symbol = (ViewData["CurrencySymbol"] as string) ?? "€";
}

<div class="page-hero">
    <div class="section-divider"></div>
    <h1 class="hero-title">ROLIX</h1>
    <p class="hero-subtitle">
        L’excellence horlogère suisse depuis plus d’un siècle. Des montres pensées pour durer,
        conçues pour traverser le temps.
    </p>
</div>

<section class="section-shell home-products">
    <h2 class="section-title">Sélection de montres</h2>

    @if (Model != null && Model.Any())
    {
        <div class="products-grid">
            @foreach (var p in Model)
            {
                var imageUrl = string.IsNullOrWhiteSpace(p.ImageUrl)
                ? Url.Content("~/images/placeholder-watch.svg")
                : p.ImageUrl;

                <article class="product-card">
                    <div class="product-media">
                        <a asp-controller="Produits" asp-action="Details" asp-route-id="@p.Id">
                            <img src="@imageUrl" alt="@p.Nom" />
                        </a>
                    </div>

                    <div class="product-body">
                        <h3 class="product-name">@p.Nom</h3>

                        @* IMPORTANT: remplace "Reference" si ton champ s’appelle autrement (Ref, ReferenceProduit, etc.) *@
                        @if (!string.IsNullOrWhiteSpace(p.Reference))
                        {
                            <div class="product-ref">REF-@p.Reference</div>
                        }

                        <div class="product-price">
                            @p.GetPrice(currency).ToString("N0") @symbol
                        </div>

                        <div class="product-actions">
                            <a class="button button-outline"
                               asp-controller="Produits"
                               asp-action="Details"
                               asp-route-id="@p.Id">
                                Voir le détail
                            </a>
                        </div>
                    </div>
                </article>
            }
        </div>
    }
    else
    {
        <div class="empty-state">
            <p>Aucune montre n’est disponible pour le moment.</p>
        </div>
    }

    <div class="cta-row">
        <a class="button" asp-controller="Produits" asp-action="Index">Découvrir nos montres</a>
    </div>
</section>

<section class="craft-section">
    <div class="craft-shell">
        <div class="section-divider"></div>
        <h2 class="section-title">Notre savoir-faire</h2>
        <p class="craft-description">
            Chaque montre Rolix est assemblée avec précision par des maîtres horlogers. De la conception du mouvement à l’assemblage final,
            chaque détail est contrôlé pour garantir une qualité irréprochable.
        </p>
    </div>
</section>
